{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 12,
   "id": "f91f0ddd",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import seaborn as sns\n",
    "import matplotlib.pyplot as plt\n",
    "import statsmodels.formula.api as smf\n",
    "import wooldridge as wdg"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "2f89baef",
   "metadata": {},
   "outputs": [],
   "source": [
    "wage2 = wdg.data('wage2')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "52c8247f",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>wage</th>\n",
       "      <th>hours</th>\n",
       "      <th>IQ</th>\n",
       "      <th>KWW</th>\n",
       "      <th>educ</th>\n",
       "      <th>exper</th>\n",
       "      <th>tenure</th>\n",
       "      <th>age</th>\n",
       "      <th>married</th>\n",
       "      <th>black</th>\n",
       "      <th>south</th>\n",
       "      <th>urban</th>\n",
       "      <th>sibs</th>\n",
       "      <th>brthord</th>\n",
       "      <th>meduc</th>\n",
       "      <th>feduc</th>\n",
       "      <th>lwage</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>769</td>\n",
       "      <td>40</td>\n",
       "      <td>93</td>\n",
       "      <td>35</td>\n",
       "      <td>12</td>\n",
       "      <td>11</td>\n",
       "      <td>2</td>\n",
       "      <td>31</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2.0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>6.645091</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>808</td>\n",
       "      <td>50</td>\n",
       "      <td>119</td>\n",
       "      <td>41</td>\n",
       "      <td>18</td>\n",
       "      <td>11</td>\n",
       "      <td>16</td>\n",
       "      <td>37</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>NaN</td>\n",
       "      <td>14.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>6.694562</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>825</td>\n",
       "      <td>40</td>\n",
       "      <td>108</td>\n",
       "      <td>46</td>\n",
       "      <td>14</td>\n",
       "      <td>11</td>\n",
       "      <td>9</td>\n",
       "      <td>33</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>2.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>14.0</td>\n",
       "      <td>6.715384</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>650</td>\n",
       "      <td>40</td>\n",
       "      <td>96</td>\n",
       "      <td>32</td>\n",
       "      <td>12</td>\n",
       "      <td>13</td>\n",
       "      <td>7</td>\n",
       "      <td>32</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>4</td>\n",
       "      <td>3.0</td>\n",
       "      <td>12.0</td>\n",
       "      <td>12.0</td>\n",
       "      <td>6.476973</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>562</td>\n",
       "      <td>40</td>\n",
       "      <td>74</td>\n",
       "      <td>27</td>\n",
       "      <td>11</td>\n",
       "      <td>14</td>\n",
       "      <td>5</td>\n",
       "      <td>34</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>10</td>\n",
       "      <td>6.0</td>\n",
       "      <td>6.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>6.331502</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>930</th>\n",
       "      <td>520</td>\n",
       "      <td>40</td>\n",
       "      <td>79</td>\n",
       "      <td>28</td>\n",
       "      <td>16</td>\n",
       "      <td>6</td>\n",
       "      <td>1</td>\n",
       "      <td>30</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1.0</td>\n",
       "      <td>11.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>6.253829</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>931</th>\n",
       "      <td>1202</td>\n",
       "      <td>40</td>\n",
       "      <td>102</td>\n",
       "      <td>32</td>\n",
       "      <td>13</td>\n",
       "      <td>10</td>\n",
       "      <td>3</td>\n",
       "      <td>31</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>7</td>\n",
       "      <td>7.0</td>\n",
       "      <td>8.0</td>\n",
       "      <td>6.0</td>\n",
       "      <td>7.091742</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>932</th>\n",
       "      <td>538</td>\n",
       "      <td>45</td>\n",
       "      <td>77</td>\n",
       "      <td>22</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>10</td>\n",
       "      <td>28</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>9</td>\n",
       "      <td>NaN</td>\n",
       "      <td>7.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>6.287858</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>933</th>\n",
       "      <td>873</td>\n",
       "      <td>44</td>\n",
       "      <td>109</td>\n",
       "      <td>25</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>12</td>\n",
       "      <td>28</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>11.0</td>\n",
       "      <td>6.771935</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>934</th>\n",
       "      <td>1000</td>\n",
       "      <td>40</td>\n",
       "      <td>107</td>\n",
       "      <td>32</td>\n",
       "      <td>12</td>\n",
       "      <td>17</td>\n",
       "      <td>18</td>\n",
       "      <td>35</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>5</td>\n",
       "      <td>1.0</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>6.907755</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>935 rows Ã— 17 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "     wage  hours   IQ  KWW  educ  exper  tenure  age  married  black  south  \\\n",
       "0     769     40   93   35    12     11       2   31        1      0      0   \n",
       "1     808     50  119   41    18     11      16   37        1      0      0   \n",
       "2     825     40  108   46    14     11       9   33        1      0      0   \n",
       "3     650     40   96   32    12     13       7   32        1      0      0   \n",
       "4     562     40   74   27    11     14       5   34        1      0      0   \n",
       "..    ...    ...  ...  ...   ...    ...     ...  ...      ...    ...    ...   \n",
       "930   520     40   79   28    16      6       1   30        1      1      1   \n",
       "931  1202     40  102   32    13     10       3   31        1      0      1   \n",
       "932   538     45   77   22    12     12      10   28        1      1      1   \n",
       "933   873     44  109   25    12     12      12   28        1      0      1   \n",
       "934  1000     40  107   32    12     17      18   35        1      0      1   \n",
       "\n",
       "     urban  sibs  brthord  meduc  feduc     lwage  \n",
       "0        1     1      2.0    8.0    8.0  6.645091  \n",
       "1        1     1      NaN   14.0   14.0  6.694562  \n",
       "2        1     1      2.0   14.0   14.0  6.715384  \n",
       "3        1     4      3.0   12.0   12.0  6.476973  \n",
       "4        1    10      6.0    6.0   11.0  6.331502  \n",
       "..     ...   ...      ...    ...    ...       ...  \n",
       "930      0     0      1.0   11.0    NaN  6.253829  \n",
       "931      1     7      7.0    8.0    6.0  7.091742  \n",
       "932      0     9      NaN    7.0    NaN  6.287858  \n",
       "933      0     1      1.0    NaN   11.0  6.771935  \n",
       "934      0     5      1.0    NaN    NaN  6.907755  \n",
       "\n",
       "[935 rows x 17 columns]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wage2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "31da79f0",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(935, 17)"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wage2.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "id": "674291d7",
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>wage</th>\n",
       "      <th>hours</th>\n",
       "      <th>IQ</th>\n",
       "      <th>KWW</th>\n",
       "      <th>educ</th>\n",
       "      <th>exper</th>\n",
       "      <th>tenure</th>\n",
       "      <th>age</th>\n",
       "      <th>married</th>\n",
       "      <th>black</th>\n",
       "      <th>south</th>\n",
       "      <th>urban</th>\n",
       "      <th>sibs</th>\n",
       "      <th>brthord</th>\n",
       "      <th>meduc</th>\n",
       "      <th>feduc</th>\n",
       "      <th>lwage</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>wage</th>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.0095</td>\n",
       "      <td>0.3091</td>\n",
       "      <td>0.3261</td>\n",
       "      <td>0.3271</td>\n",
       "      <td>0.0022</td>\n",
       "      <td>0.1283</td>\n",
       "      <td>0.1567</td>\n",
       "      <td>0.1366</td>\n",
       "      <td>-0.2109</td>\n",
       "      <td>-0.1594</td>\n",
       "      <td>0.1984</td>\n",
       "      <td>-0.1592</td>\n",
       "      <td>-0.1455</td>\n",
       "      <td>0.2148</td>\n",
       "      <td>0.2376</td>\n",
       "      <td>0.9531</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>hours</th>\n",
       "      <td>-0.0095</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.0738</td>\n",
       "      <td>0.1139</td>\n",
       "      <td>0.0910</td>\n",
       "      <td>-0.0621</td>\n",
       "      <td>-0.0555</td>\n",
       "      <td>0.0248</td>\n",
       "      <td>0.0326</td>\n",
       "      <td>-0.1079</td>\n",
       "      <td>-0.0295</td>\n",
       "      <td>0.0166</td>\n",
       "      <td>-0.0496</td>\n",
       "      <td>-0.0431</td>\n",
       "      <td>0.0766</td>\n",
       "      <td>0.0632</td>\n",
       "      <td>-0.0472</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>IQ</th>\n",
       "      <td>0.3091</td>\n",
       "      <td>0.0738</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.4135</td>\n",
       "      <td>0.5157</td>\n",
       "      <td>-0.2249</td>\n",
       "      <td>0.0422</td>\n",
       "      <td>-0.0437</td>\n",
       "      <td>-0.0147</td>\n",
       "      <td>-0.3879</td>\n",
       "      <td>-0.2098</td>\n",
       "      <td>0.0389</td>\n",
       "      <td>-0.2848</td>\n",
       "      <td>-0.1794</td>\n",
       "      <td>0.3318</td>\n",
       "      <td>0.3439</td>\n",
       "      <td>0.3148</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>KWW</th>\n",
       "      <td>0.3261</td>\n",
       "      <td>0.1139</td>\n",
       "      <td>0.4135</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.3881</td>\n",
       "      <td>0.0175</td>\n",
       "      <td>0.1414</td>\n",
       "      <td>0.3931</td>\n",
       "      <td>0.0899</td>\n",
       "      <td>-0.2808</td>\n",
       "      <td>-0.0944</td>\n",
       "      <td>0.0982</td>\n",
       "      <td>-0.2850</td>\n",
       "      <td>-0.1536</td>\n",
       "      <td>0.2408</td>\n",
       "      <td>0.2349</td>\n",
       "      <td>0.3063</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>educ</th>\n",
       "      <td>0.3271</td>\n",
       "      <td>0.0910</td>\n",
       "      <td>0.5157</td>\n",
       "      <td>0.3881</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.4556</td>\n",
       "      <td>-0.0362</td>\n",
       "      <td>-0.0123</td>\n",
       "      <td>-0.0586</td>\n",
       "      <td>-0.1795</td>\n",
       "      <td>-0.0970</td>\n",
       "      <td>0.0722</td>\n",
       "      <td>-0.2393</td>\n",
       "      <td>-0.2050</td>\n",
       "      <td>0.3642</td>\n",
       "      <td>0.4269</td>\n",
       "      <td>0.3121</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>exper</th>\n",
       "      <td>0.0022</td>\n",
       "      <td>-0.0621</td>\n",
       "      <td>-0.2249</td>\n",
       "      <td>0.0175</td>\n",
       "      <td>-0.4556</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.2437</td>\n",
       "      <td>0.4953</td>\n",
       "      <td>0.1063</td>\n",
       "      <td>0.0558</td>\n",
       "      <td>0.0213</td>\n",
       "      <td>-0.0474</td>\n",
       "      <td>0.0643</td>\n",
       "      <td>0.0883</td>\n",
       "      <td>-0.1863</td>\n",
       "      <td>-0.2568</td>\n",
       "      <td>0.0206</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>tenure</th>\n",
       "      <td>0.1283</td>\n",
       "      <td>-0.0555</td>\n",
       "      <td>0.0422</td>\n",
       "      <td>0.1414</td>\n",
       "      <td>-0.0362</td>\n",
       "      <td>0.2437</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.2706</td>\n",
       "      <td>0.0726</td>\n",
       "      <td>-0.0782</td>\n",
       "      <td>-0.0617</td>\n",
       "      <td>-0.0385</td>\n",
       "      <td>-0.0392</td>\n",
       "      <td>-0.0285</td>\n",
       "      <td>-0.0150</td>\n",
       "      <td>-0.0592</td>\n",
       "      <td>0.1859</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>age</th>\n",
       "      <td>0.1567</td>\n",
       "      <td>0.0248</td>\n",
       "      <td>-0.0437</td>\n",
       "      <td>0.3931</td>\n",
       "      <td>-0.0123</td>\n",
       "      <td>0.4953</td>\n",
       "      <td>0.2706</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.1070</td>\n",
       "      <td>-0.0356</td>\n",
       "      <td>-0.0295</td>\n",
       "      <td>-0.0067</td>\n",
       "      <td>-0.0407</td>\n",
       "      <td>0.0054</td>\n",
       "      <td>-0.0293</td>\n",
       "      <td>-0.0713</td>\n",
       "      <td>0.1618</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>married</th>\n",
       "      <td>0.1366</td>\n",
       "      <td>0.0326</td>\n",
       "      <td>-0.0147</td>\n",
       "      <td>0.0899</td>\n",
       "      <td>-0.0586</td>\n",
       "      <td>0.1063</td>\n",
       "      <td>0.0726</td>\n",
       "      <td>0.1070</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.0534</td>\n",
       "      <td>0.0228</td>\n",
       "      <td>-0.0402</td>\n",
       "      <td>-0.0043</td>\n",
       "      <td>-0.0147</td>\n",
       "      <td>-0.0228</td>\n",
       "      <td>-0.0203</td>\n",
       "      <td>0.1500</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>black</th>\n",
       "      <td>-0.2109</td>\n",
       "      <td>-0.1079</td>\n",
       "      <td>-0.3879</td>\n",
       "      <td>-0.2808</td>\n",
       "      <td>-0.1795</td>\n",
       "      <td>0.0558</td>\n",
       "      <td>-0.0782</td>\n",
       "      <td>-0.0356</td>\n",
       "      <td>-0.0534</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.2365</td>\n",
       "      <td>0.0702</td>\n",
       "      <td>0.3053</td>\n",
       "      <td>0.1034</td>\n",
       "      <td>-0.2212</td>\n",
       "      <td>-0.1995</td>\n",
       "      <td>-0.2321</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>south</th>\n",
       "      <td>-0.1594</td>\n",
       "      <td>-0.0295</td>\n",
       "      <td>-0.2098</td>\n",
       "      <td>-0.0944</td>\n",
       "      <td>-0.0970</td>\n",
       "      <td>0.0213</td>\n",
       "      <td>-0.0617</td>\n",
       "      <td>-0.0295</td>\n",
       "      <td>0.0228</td>\n",
       "      <td>0.2365</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.1099</td>\n",
       "      <td>0.0663</td>\n",
       "      <td>0.0937</td>\n",
       "      <td>-0.1579</td>\n",
       "      <td>-0.1724</td>\n",
       "      <td>-0.1948</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>urban</th>\n",
       "      <td>0.1984</td>\n",
       "      <td>0.0166</td>\n",
       "      <td>0.0389</td>\n",
       "      <td>0.0982</td>\n",
       "      <td>0.0722</td>\n",
       "      <td>-0.0474</td>\n",
       "      <td>-0.0385</td>\n",
       "      <td>-0.0067</td>\n",
       "      <td>-0.0402</td>\n",
       "      <td>0.0702</td>\n",
       "      <td>-0.1099</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.0315</td>\n",
       "      <td>0.0024</td>\n",
       "      <td>0.0340</td>\n",
       "      <td>0.1122</td>\n",
       "      <td>0.2038</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>sibs</th>\n",
       "      <td>-0.1592</td>\n",
       "      <td>-0.0496</td>\n",
       "      <td>-0.2848</td>\n",
       "      <td>-0.2850</td>\n",
       "      <td>-0.2393</td>\n",
       "      <td>0.0643</td>\n",
       "      <td>-0.0392</td>\n",
       "      <td>-0.0407</td>\n",
       "      <td>-0.0043</td>\n",
       "      <td>0.3053</td>\n",
       "      <td>0.0663</td>\n",
       "      <td>-0.0315</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.5939</td>\n",
       "      <td>-0.2872</td>\n",
       "      <td>-0.2320</td>\n",
       "      <td>-0.1528</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>brthord</th>\n",
       "      <td>-0.1455</td>\n",
       "      <td>-0.0431</td>\n",
       "      <td>-0.1794</td>\n",
       "      <td>-0.1536</td>\n",
       "      <td>-0.2050</td>\n",
       "      <td>0.0883</td>\n",
       "      <td>-0.0285</td>\n",
       "      <td>0.0054</td>\n",
       "      <td>-0.0147</td>\n",
       "      <td>0.1034</td>\n",
       "      <td>0.0937</td>\n",
       "      <td>0.0024</td>\n",
       "      <td>0.5939</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>-0.2759</td>\n",
       "      <td>-0.2304</td>\n",
       "      <td>-0.1419</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>meduc</th>\n",
       "      <td>0.2148</td>\n",
       "      <td>0.0766</td>\n",
       "      <td>0.3318</td>\n",
       "      <td>0.2408</td>\n",
       "      <td>0.3642</td>\n",
       "      <td>-0.1863</td>\n",
       "      <td>-0.0150</td>\n",
       "      <td>-0.0293</td>\n",
       "      <td>-0.0228</td>\n",
       "      <td>-0.2212</td>\n",
       "      <td>-0.1579</td>\n",
       "      <td>0.0340</td>\n",
       "      <td>-0.2872</td>\n",
       "      <td>-0.2759</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.5765</td>\n",
       "      <td>0.2136</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>feduc</th>\n",
       "      <td>0.2376</td>\n",
       "      <td>0.0632</td>\n",
       "      <td>0.3439</td>\n",
       "      <td>0.2349</td>\n",
       "      <td>0.4269</td>\n",
       "      <td>-0.2568</td>\n",
       "      <td>-0.0592</td>\n",
       "      <td>-0.0713</td>\n",
       "      <td>-0.0203</td>\n",
       "      <td>-0.1995</td>\n",
       "      <td>-0.1724</td>\n",
       "      <td>0.1122</td>\n",
       "      <td>-0.2320</td>\n",
       "      <td>-0.2304</td>\n",
       "      <td>0.5765</td>\n",
       "      <td>1.0000</td>\n",
       "      <td>0.2234</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>lwage</th>\n",
       "      <td>0.9531</td>\n",
       "      <td>-0.0472</td>\n",
       "      <td>0.3148</td>\n",
       "      <td>0.3063</td>\n",
       "      <td>0.3121</td>\n",
       "      <td>0.0206</td>\n",
       "      <td>0.1859</td>\n",
       "      <td>0.1618</td>\n",
       "      <td>0.1500</td>\n",
       "      <td>-0.2321</td>\n",
       "      <td>-0.1948</td>\n",
       "      <td>0.2038</td>\n",
       "      <td>-0.1528</td>\n",
       "      <td>-0.1419</td>\n",
       "      <td>0.2136</td>\n",
       "      <td>0.2234</td>\n",
       "      <td>1.0000</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "           wage   hours      IQ     KWW    educ   exper  tenure     age  \\\n",
       "wage     1.0000 -0.0095  0.3091  0.3261  0.3271  0.0022  0.1283  0.1567   \n",
       "hours   -0.0095  1.0000  0.0738  0.1139  0.0910 -0.0621 -0.0555  0.0248   \n",
       "IQ       0.3091  0.0738  1.0000  0.4135  0.5157 -0.2249  0.0422 -0.0437   \n",
       "KWW      0.3261  0.1139  0.4135  1.0000  0.3881  0.0175  0.1414  0.3931   \n",
       "educ     0.3271  0.0910  0.5157  0.3881  1.0000 -0.4556 -0.0362 -0.0123   \n",
       "exper    0.0022 -0.0621 -0.2249  0.0175 -0.4556  1.0000  0.2437  0.4953   \n",
       "tenure   0.1283 -0.0555  0.0422  0.1414 -0.0362  0.2437  1.0000  0.2706   \n",
       "age      0.1567  0.0248 -0.0437  0.3931 -0.0123  0.4953  0.2706  1.0000   \n",
       "married  0.1366  0.0326 -0.0147  0.0899 -0.0586  0.1063  0.0726  0.1070   \n",
       "black   -0.2109 -0.1079 -0.3879 -0.2808 -0.1795  0.0558 -0.0782 -0.0356   \n",
       "south   -0.1594 -0.0295 -0.2098 -0.0944 -0.0970  0.0213 -0.0617 -0.0295   \n",
       "urban    0.1984  0.0166  0.0389  0.0982  0.0722 -0.0474 -0.0385 -0.0067   \n",
       "sibs    -0.1592 -0.0496 -0.2848 -0.2850 -0.2393  0.0643 -0.0392 -0.0407   \n",
       "brthord -0.1455 -0.0431 -0.1794 -0.1536 -0.2050  0.0883 -0.0285  0.0054   \n",
       "meduc    0.2148  0.0766  0.3318  0.2408  0.3642 -0.1863 -0.0150 -0.0293   \n",
       "feduc    0.2376  0.0632  0.3439  0.2349  0.4269 -0.2568 -0.0592 -0.0713   \n",
       "lwage    0.9531 -0.0472  0.3148  0.3063  0.3121  0.0206  0.1859  0.1618   \n",
       "\n",
       "         married   black   south   urban    sibs  brthord   meduc   feduc  \\\n",
       "wage      0.1366 -0.2109 -0.1594  0.1984 -0.1592  -0.1455  0.2148  0.2376   \n",
       "hours     0.0326 -0.1079 -0.0295  0.0166 -0.0496  -0.0431  0.0766  0.0632   \n",
       "IQ       -0.0147 -0.3879 -0.2098  0.0389 -0.2848  -0.1794  0.3318  0.3439   \n",
       "KWW       0.0899 -0.2808 -0.0944  0.0982 -0.2850  -0.1536  0.2408  0.2349   \n",
       "educ     -0.0586 -0.1795 -0.0970  0.0722 -0.2393  -0.2050  0.3642  0.4269   \n",
       "exper     0.1063  0.0558  0.0213 -0.0474  0.0643   0.0883 -0.1863 -0.2568   \n",
       "tenure    0.0726 -0.0782 -0.0617 -0.0385 -0.0392  -0.0285 -0.0150 -0.0592   \n",
       "age       0.1070 -0.0356 -0.0295 -0.0067 -0.0407   0.0054 -0.0293 -0.0713   \n",
       "married   1.0000 -0.0534  0.0228 -0.0402 -0.0043  -0.0147 -0.0228 -0.0203   \n",
       "black    -0.0534  1.0000  0.2365  0.0702  0.3053   0.1034 -0.2212 -0.1995   \n",
       "south     0.0228  0.2365  1.0000 -0.1099  0.0663   0.0937 -0.1579 -0.1724   \n",
       "urban    -0.0402  0.0702 -0.1099  1.0000 -0.0315   0.0024  0.0340  0.1122   \n",
       "sibs     -0.0043  0.3053  0.0663 -0.0315  1.0000   0.5939 -0.2872 -0.2320   \n",
       "brthord  -0.0147  0.1034  0.0937  0.0024  0.5939   1.0000 -0.2759 -0.2304   \n",
       "meduc    -0.0228 -0.2212 -0.1579  0.0340 -0.2872  -0.2759  1.0000  0.5765   \n",
       "feduc    -0.0203 -0.1995 -0.1724  0.1122 -0.2320  -0.2304  0.5765  1.0000   \n",
       "lwage     0.1500 -0.2321 -0.1948  0.2038 -0.1528  -0.1419  0.2136  0.2234   \n",
       "\n",
       "          lwage  \n",
       "wage     0.9531  \n",
       "hours   -0.0472  \n",
       "IQ       0.3148  \n",
       "KWW      0.3063  \n",
       "educ     0.3121  \n",
       "exper    0.0206  \n",
       "tenure   0.1859  \n",
       "age      0.1618  \n",
       "married  0.1500  \n",
       "black   -0.2321  \n",
       "south   -0.1948  \n",
       "urban    0.2038  \n",
       "sibs    -0.1528  \n",
       "brthord -0.1419  \n",
       "meduc    0.2136  \n",
       "feduc    0.2234  \n",
       "lwage    1.0000  "
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wage2.corr().round(4)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "abef8c79",
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<class 'pandas.core.frame.DataFrame'>\n",
      "RangeIndex: 935 entries, 0 to 934\n",
      "Data columns (total 17 columns):\n",
      " #   Column   Non-Null Count  Dtype  \n",
      "---  ------   --------------  -----  \n",
      " 0   wage     935 non-null    int64  \n",
      " 1   hours    935 non-null    int64  \n",
      " 2   IQ       935 non-null    int64  \n",
      " 3   KWW      935 non-null    int64  \n",
      " 4   educ     935 non-null    int64  \n",
      " 5   exper    935 non-null    int64  \n",
      " 6   tenure   935 non-null    int64  \n",
      " 7   age      935 non-null    int64  \n",
      " 8   married  935 non-null    int64  \n",
      " 9   black    935 non-null    int64  \n",
      " 10  south    935 non-null    int64  \n",
      " 11  urban    935 non-null    int64  \n",
      " 12  sibs     935 non-null    int64  \n",
      " 13  brthord  852 non-null    float64\n",
      " 14  meduc    857 non-null    float64\n",
      " 15  feduc    741 non-null    float64\n",
      " 16  lwage    935 non-null    float64\n",
      "dtypes: float64(4), int64(13)\n",
      "memory usage: 124.3 KB\n"
     ]
    }
   ],
   "source": [
    "wage2.info()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "id": "a2921bde",
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "wage         0\n",
       "hours        0\n",
       "IQ           0\n",
       "KWW          0\n",
       "educ         0\n",
       "exper        0\n",
       "tenure       0\n",
       "age          0\n",
       "married      0\n",
       "black        0\n",
       "south        0\n",
       "urban        0\n",
       "sibs         0\n",
       "brthord     83\n",
       "meduc       78\n",
       "feduc      194\n",
       "lwage        0\n",
       "dtype: int64"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wage2.isnull().sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "231769a9",
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "married      2\n",
       "black        2\n",
       "south        2\n",
       "urban        2\n",
       "educ        10\n",
       "brthord     10\n",
       "age         11\n",
       "sibs        15\n",
       "feduc       18\n",
       "meduc       19\n",
       "exper       22\n",
       "tenure      23\n",
       "hours       37\n",
       "KWW         42\n",
       "IQ          80\n",
       "wage       449\n",
       "lwage      449\n",
       "dtype: int64"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "wage2.nunique().sort_values()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "2bd0778a",
   "metadata": {},
   "outputs": [],
   "source": [
    "wage2['age2'] = wage2['age']**2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "id": "a8053e50",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>OLS Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>          <td>wage</td>       <th>  R-squared:         </th> <td>   0.133</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.131</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   71.38</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>             <td>Tue, 23 Aug 2022</td> <th>  Prob (F-statistic):</th> <td>1.43e-29</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                 <td>00:24:38</td>     <th>  Log-Likelihood:    </th> <td> -6871.7</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Observations:</th>      <td>   935</td>      <th>  AIC:               </th> <td>1.375e+04</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Residuals:</th>          <td>   932</td>      <th>  BIC:               </th> <td>1.376e+04</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Model:</th>              <td>     2</td>      <th>                     </th>     <td> </td>    \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "      <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th> <td> -549.7496</td> <td>  152.823</td> <td>   -3.597</td> <td> 0.000</td> <td> -849.666</td> <td> -249.833</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>educ</th>      <td>   60.5769</td> <td>    5.615</td> <td>   10.788</td> <td> 0.000</td> <td>   49.556</td> <td>   71.597</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>age</th>       <td>   20.9134</td> <td>    3.969</td> <td>    5.269</td> <td> 0.000</td> <td>   13.124</td> <td>   28.703</td>\n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "  <th>Omnibus:</th>       <td>204.551</td> <th>  Durbin-Watson:     </th> <td>   1.848</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td> 576.057</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Skew:</th>          <td> 1.100</td>  <th>  Prob(JB):          </th> <td>8.14e-126</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Kurtosis:</th>      <td> 6.154</td>  <th>  Cond. No.          </th> <td>    445.</td> \n",
       "</tr>\n",
       "</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified."
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                            OLS Regression Results                            \n",
       "==============================================================================\n",
       "Dep. Variable:                   wage   R-squared:                       0.133\n",
       "Model:                            OLS   Adj. R-squared:                  0.131\n",
       "Method:                 Least Squares   F-statistic:                     71.38\n",
       "Date:                Tue, 23 Aug 2022   Prob (F-statistic):           1.43e-29\n",
       "Time:                        00:24:38   Log-Likelihood:                -6871.7\n",
       "No. Observations:                 935   AIC:                         1.375e+04\n",
       "Df Residuals:                     932   BIC:                         1.376e+04\n",
       "Df Model:                           2                                         \n",
       "Covariance Type:            nonrobust                                         \n",
       "==============================================================================\n",
       "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
       "------------------------------------------------------------------------------\n",
       "Intercept   -549.7496    152.823     -3.597      0.000    -849.666    -249.833\n",
       "educ          60.5769      5.615     10.788      0.000      49.556      71.597\n",
       "age           20.9134      3.969      5.269      0.000      13.124      28.703\n",
       "==============================================================================\n",
       "Omnibus:                      204.551   Durbin-Watson:                   1.848\n",
       "Prob(Omnibus):                  0.000   Jarque-Bera (JB):              576.057\n",
       "Skew:                           1.100   Prob(JB):                    8.14e-126\n",
       "Kurtosis:                       6.154   Cond. No.                         445.\n",
       "==============================================================================\n",
       "\n",
       "Notes:\n",
       "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
       "\"\"\""
      ]
     },
     "execution_count": 17,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "regression = smf.ols('wage ~ educ + age', data = wage2)\n",
    "regression.fit().summary()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "id": "58fe56bc",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table class=\"simpletable\">\n",
       "<caption>OLS Regression Results</caption>\n",
       "<tr>\n",
       "  <th>Dep. Variable:</th>          <td>wage</td>       <th>  R-squared:         </th> <td>   0.133</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.130</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   47.54</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Date:</th>             <td>Tue, 23 Aug 2022</td> <th>  Prob (F-statistic):</th> <td>1.36e-28</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Time:</th>                 <td>00:25:13</td>     <th>  Log-Likelihood:    </th> <td> -6871.7</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>No. Observations:</th>      <td>   935</td>      <th>  AIC:               </th> <td>1.375e+04</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Residuals:</th>          <td>   931</td>      <th>  BIC:               </th> <td>1.377e+04</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>    \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    \n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "      <td></td>         <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Intercept</th> <td> -792.8125</td> <td> 1648.878</td> <td>   -0.481</td> <td> 0.631</td> <td>-4028.761</td> <td> 2443.136</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>educ</th>      <td>   60.5020</td> <td>    5.641</td> <td>   10.725</td> <td> 0.000</td> <td>   49.431</td> <td>   71.573</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>age</th>       <td>   35.7182</td> <td>  100.079</td> <td>    0.357</td> <td> 0.721</td> <td> -160.687</td> <td>  232.124</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>age2</th>      <td>   -0.2225</td> <td>    1.503</td> <td>   -0.148</td> <td> 0.882</td> <td>   -3.173</td> <td>    2.727</td>\n",
       "</tr>\n",
       "</table>\n",
       "<table class=\"simpletable\">\n",
       "<tr>\n",
       "  <th>Omnibus:</th>       <td>204.701</td> <th>  Durbin-Watson:     </th> <td>   1.848</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td> 576.758</td> \n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Skew:</th>          <td> 1.100</td>  <th>  Prob(JB):          </th> <td>5.74e-126</td>\n",
       "</tr>\n",
       "<tr>\n",
       "  <th>Kurtosis:</th>      <td> 6.156</td>  <th>  Cond. No.          </th> <td>1.50e+05</td> \n",
       "</tr>\n",
       "</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The condition number is large, 1.5e+05. This might indicate that there are<br/>strong multicollinearity or other numerical problems."
      ],
      "text/plain": [
       "<class 'statsmodels.iolib.summary.Summary'>\n",
       "\"\"\"\n",
       "                            OLS Regression Results                            \n",
       "==============================================================================\n",
       "Dep. Variable:                   wage   R-squared:                       0.133\n",
       "Model:                            OLS   Adj. R-squared:                  0.130\n",
       "Method:                 Least Squares   F-statistic:                     47.54\n",
       "Date:                Tue, 23 Aug 2022   Prob (F-statistic):           1.36e-28\n",
       "Time:                        00:25:13   Log-Likelihood:                -6871.7\n",
       "No. Observations:                 935   AIC:                         1.375e+04\n",
       "Df Residuals:                     931   BIC:                         1.377e+04\n",
       "Df Model:                           3                                         \n",
       "Covariance Type:            nonrobust                                         \n",
       "==============================================================================\n",
       "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
       "------------------------------------------------------------------------------\n",
       "Intercept   -792.8125   1648.878     -0.481      0.631   -4028.761    2443.136\n",
       "educ          60.5020      5.641     10.725      0.000      49.431      71.573\n",
       "age           35.7182    100.079      0.357      0.721    -160.687     232.124\n",
       "age2          -0.2225      1.503     -0.148      0.882      -3.173       2.727\n",
       "==============================================================================\n",
       "Omnibus:                      204.701   Durbin-Watson:                   1.848\n",
       "Prob(Omnibus):                  0.000   Jarque-Bera (JB):              576.758\n",
       "Skew:                           1.100   Prob(JB):                    5.74e-126\n",
       "Kurtosis:                       6.156   Cond. No.                     1.50e+05\n",
       "==============================================================================\n",
       "\n",
       "Notes:\n",
       "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n",
       "[2] The condition number is large, 1.5e+05. This might indicate that there are\n",
       "strong multicollinearity or other numerical problems.\n",
       "\"\"\""
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "regression_2 = smf.ols('wage ~ educ + age + age2', data = wage2)\n",
    "regression_2.fit().summary()"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
